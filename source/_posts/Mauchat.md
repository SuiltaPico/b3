---
title: Mauchat 开发笔记
---

## 缘由
想做个通用的 chat 应用。之前用 Vue 整了个 [Chat By API](https://chatbyapi.netlify.app/)，但写的力不从心。

## Chat By API 的毛病
Chat By API 是个模仿 ChatGPT 的网页本地应用，所有信息储存在浏览器缓存中。

1. **数据库选型错误**。当初缺乏数据库知识，在选型浏览器数据库，误打误撞选择了 PouchDB（兼容 Apache CouchDB）。PouchDB 宣称自己专注于构筑离线应用，解决同步问题。但在使用过程中，发现了和我的应用不兼容的诸多问题：
    - **高频更新**。PouchDB 基于文档，而仿 ChatGPT 的应用需要持续更新文档来处理LLM 生成的流。这导致要不断更改文档的版本，造成在一次对话中会产生文档的大量的新版本（可能是几百条）导致浏览器卡顿。
    - **PouchDB 过于冷门**。冷门能衍生出很多问题，比如 Bug 多且长期不能解决、使用文档过少、软件极端情况下的解决方案过少。
      
        虽然已经忘了自己遇到的问题有哪些了（毕竟一两年前的项目），但我仍然记得，当时第一次明白了使用冷门框架的代价：
        - 查官方文档看不懂，具体为官方文档不详细，专业术语堆积过多，没有详细示例。
        - 查 Github Issus 发现问题未解决。
        - 查 Stack Overflow 发现并没有人提出问题。

        虽然最终靠一些绕着走的方法解决了问题，但这让我吸取了教训。

        ::: collapsible 真的是冷门的问题吗？
          冷门只会带来资料缺乏、
        :::

2. 