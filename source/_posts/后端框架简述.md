---
title: 后端框架简述
---

## 轻量级 Web 框架
轻量级 Web 框架只关注于将繁琐的 HTTP 操作包装成更加简单和标准的 API，并提供便于使用的路由管理和中间件管理功能。

### 路由管理
路由管理是 Web 框架的核心功能之一。它的主要任务是将 HTTP 请求映射到特定的处理函数或控制器。

一个好的路由管理系统会具备以下特性：
- **高效的路由匹配**：使用高效的数据结构（如前缀树）来快速匹配请求路径。
- **灵活的路由定义**：允许开发者定义动态路由参数、路由组和命名路由等。
  - **动态路由参数**：程序员可以定义类似这样的路由 `/用户信息/:id`，`:id` 会被视为动态路由参数处理，在客户端发起 `/用户信息/10` 的请求时，Web 框架会把 `:id` 解析成请求对象的 id 键，减少了程序员的不必要的工作。
- **易于维护**：通过明确的路由定义方式，防止开发者写出难以维护的路由代码。


### 中间件管理
后端框架会提供一个管理中间件的标准接口。中间件是指在网络请求的时候会被调用的函数，它可以访问和修改上下文对象，例如通过解析请求参数来验证用户请求的合法性、设置特定的 HTTP 响应头等。

一个好的路由管理系统会具备以下特性：
- **标准接口**：定义中间件的标准接口，使得中间件可以相互组合和重用。
- **顺序执行**：允许中间件按照定义的顺序执行，确保请求和响应处理的逻辑清晰。
- **条件执行**：支持条件性地应用中间件，例如基于请求路径或请求方法。

后端框架一般有这些中间件：
- **数据库插件**：用于连接数据库，并将数据库客户端注入中间件上下文中。
- **输入验证**：用于验证用户客户端发送的参数的合法性，避免不合法输入和恶意攻击。
- **安全插件**：避免常见的跨站请求伪造、XSS、重放攻击等攻击，
- **身份验证**：JWT 验证、OAuth 验证（第三方登录）
- **文件处理**：处理大文件上传、服务器静态资源管理
- **日志记录**：记录服务器的运行信息、异常信息、崩溃原因等
- **缓存控制**：控制服务器与 redis 的缓存同步、提供标准的 HTTP 缓存支持。
- **性能优化**：限制请求速率以防止恶意请求、压缩 HTTP 响应
- **文档生成**：生成 Swagger/OpenAPI 文档
- **实用功能**：处理跨域资源共享、表单数据、设置 cookies

### 主流的框架
以下这些是主流的轻量级 Web 框架：
- **JavaScript/TypeScript**：Express.js、Fastify
- **Python**：Flask、FastAPI

## 全功能 Web 框架
全功能 Web 框架通常提供一整套工具和功能，用于构建复杂且可扩展的应用程序。全功能 Web 框架一般提供这些功能：
- **依赖注入**：让对象不再创建对象，而是让一个管理器去管理对象，不用关心对象创建的先后问题，可以处理复杂的类的依赖管理问题。
- **模块化**：抽象层级高于中间件的模块化管理，提供了完整的模块生命周期、钩子函数等。

这种框架对于业务逻辑也有一定的架构要求，一般采用**控制器-服务-储存库**架构。
- **控制器**：控制器是服务器提供给的接口，一般在这里将外界的请求转发给**服务**处理。
- **服务**：服务是一系列的业务逻辑。程序员将在这里编写程序的所有业务逻辑。
- **储存库**：储存库是负责管理数据加载、储存、访问的接口。程序员在这里定义数据的架构、内存中的数据模型到硬盘储存的模型的转换方法、特殊数据的关联加载方法等逻辑。

全功能 Web 框架包含的模块一般比轻量级 Web 框架的中间件多，但是也会很复杂。

### 主流的框架
以下这些是主流的全功能 Web 框架：
- **JavaScript/TypeScript**：NestJS
- **Java**：Spring Boot
- **Python**：Django 
- **Ruby**：Ruby on Rails
- **PHP**：Laravel
- **C#**：ASP.NET Core